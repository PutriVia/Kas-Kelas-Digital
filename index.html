<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buku Kas Kelas Digital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body class="bg-blue-50 min-h-screen p-4 md:p-8 font-sans">

    <div class="max-w-5xl mx-auto">
        <div class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 flex justify-center items-center gap-2">
                <i class="fas fa-wallet text-blue-600"></i> Buku Kas Kelas Digital
            </h1>
            <p class="text-gray-500">Kelola keuangan kas kelas dengan mudah dan terorganisir!</p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="bg-green-50 p-6 rounded-xl border border-green-100 shadow-sm">
                <p class="text-green-600 text-sm font-semibold">Total Pemasukan</p>
                <h2 id="total-pemasukan" class="text-2xl font-bold text-green-700">Rp 0</h2>
            </div>
            <div class="bg-red-50 p-6 rounded-xl border border-red-100 shadow-sm">
                <p class="text-red-600 text-sm font-semibold">Total Pengeluaran</p>
                <h2 id="total-pengeluaran" class="text-2xl font-bold text-red-700">Rp 0</h2>
            </div>
            <div class="bg-blue-600 p-6 rounded-xl shadow-lg text-white">
                <p class="text-blue-100 text-sm font-semibold">Saldo</p>
                <h2 id="total-saldo" class="text-2xl font-bold">Rp 0</h2>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                <h3 class="text-lg font-bold mb-4">Tambah Transaksi</h3>
                <div class="flex gap-2 mb-4">
                    <button onclick="setType('pemasukan')" id="btn-pemasukan" class="flex-1 py-2 rounded-lg font-semibold bg-green-500 text-white transition">Pemasukan</button>
                    <button onclick="setType('pengeluaran')" id="btn-pengeluaran" class="flex-1 py-2 rounded-lg font-semibold bg-gray-100 text-gray-600 hover:bg-red-500 hover:text-white transition">Pengeluaran</button>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm text-gray-600 mb-1">Nama Siswa</label>
                        <input type="text" id="input-namasiswa" class="w-full p-2 border rounded-lg outline-none">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-600 mb-1">Jumlah (Rp)</label>
                        <input type="number" id="input-jumlah" class="w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-400 outline-none" placeholder="0">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-600 mb-1">Kategori</label>
                        <select id="input-kategori" class="w-full p-2 border rounded-lg outline-none">
                            <option value="Kas">Kas</option>
                            <option value="Kebutuhan Kelas">Kebutuhan Kelas</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-600 mb-1">Keterangan</label>
                        <input type="text" id="input-keterangan" class="w-full p-2 border rounded-lg outline-none">
                    </div>
                    <button onclick="tambahTransaksi()" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition shadow-md">Simpan Transaksi</button>
                </div>
            </div>

            <div class="lg:col-span-2 bg-white p-6 rounded-2xl shadow-sm border border-gray-100">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-lg font-bold">Riwayat Transaksi</h3>
                    <div class="flex gap-2">
                        <button class="px-3 py-1 bg-blue-100 text-blue-600 rounded-full text-xs font-bold">Semua</button>
                    </div>
                </div>
                
                <div id="daftar-transaksi" class="space-y-3">
                    <p class="text-center text-gray-400 py-10">Belum ada transaksi</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- LOGIKA PENYIMPANAN DATA ---
        // Mencoba mengambil data dari memori browser, jika tidak ada pakai array kosong
        let transaksi = JSON.parse(localStorage.getItem('buku_kas_save_data')) || [];
        let tipeSekarang = 'pemasukan';

        // Panggil UI pertama kali agar data lama muncul
        updateUI();

        function setType(type) {
            tipeSekarang = type;
            const btnIn = document.getElementById('btn-pemasukan');
            const btnOut = document.getElementById('btn-pengeluaran');

            if(type === 'pemasukan') {
                btnIn.className = "flex-1 py-2 rounded-lg font-semibold bg-green-500 text-white transition";
                btnOut.className = "flex-1 py-2 rounded-lg font-semibold bg-gray-100 text-gray-600 transition";
            } else {
                btnOut.className = "flex-1 py-2 rounded-lg font-semibold bg-red-500 text-white transition";
                btnIn.className = "flex-1 py-2 rounded-lg font-semibold bg-gray-100 text-gray-600 transition";
            }
        }

        function updateUI() {
            const list = document.getElementById('daftar-transaksi');
            const elMasuk = document.getElementById('total-pemasukan');
            const elKeluar = document.getElementById('total-pengeluaran');
            const elSaldo = document.getElementById('total-saldo');

            let masuk = 0, keluar = 0;
            list.innerHTML = '';

            // Jika array kosong, tampilkan teks "Belum ada transaksi"
            if (transaksi.length === 0) {
                list.innerHTML = '<p class="text-center text-gray-400 py-10">Belum ada transaksi</p>';
            }

            transaksi.forEach((t, index) => {
                if(t.tipe === 'pemasukan') masuk += t.jumlah;
                else keluar += t.jumlah;

                // Desain kartu (card) persis seperti awal
                const card = `
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100">
                        <div class="flex items-center gap-4">
                            <div class="p-3 rounded-full ${t.tipe === 'pemasukan' ? 'bg-green-100 text-green-600' : 'bg-red-100 text-red-600'}">
                                <i class="fas ${t.tipe === 'pemasukan' ? 'fa-arrow-up' : 'fa-arrow-down'}"></i>
                            </div>
                            <div>
                                <p class="font-bold text-gray-800">${t.keterangan} <span class="ml-2 text-xs font-normal bg-gray-200 px-2 py-0.5 rounded text-gray-500">${t.kategori}</span></p>
                                <p class="text-xs text-gray-400">${t.tanggal}</p>
                            </div>
                        </div>
                        <div class="flex items-center gap-4">
                            <p class="font-bold ${t.tipe === 'pemasukan' ? 'text-green-600' : 'text-red-600'}">
                                ${t.tipe === 'pemasukan' ? '+' : '-'} Rp ${t.jumlah.toLocaleString('id-ID')}
                            </p>
                            <button onclick="hapusTransaksi(${index})" class="text-gray-300 hover:text-red-500 transition">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
                list.insertAdjacentHTML('afterbegin', card);
            });

            elMasuk.innerText = `Rp ${masuk.toLocaleString('id-ID')}`;
            elKeluar.innerText = `Rp ${keluar.toLocaleString('id-ID')}`;
            elSaldo.innerText = `Rp ${(masuk - keluar).toLocaleString('id-ID')}`;

            // SIMPAN KE LOCALSTORAGE (Ini yang bikin data ga hilang)
            localStorage.setItem('buku_kas_save_data', JSON.stringify(transaksi));
        }

        function tambahTransaksi() {
            const jumlah = parseInt(document.getElementById('input-jumlah').value);
            const kategori = document.getElementById('input-kategori').value;
            const keterangan = document.getElementById('input-keterangan').value;

            if(!jumlah || !keterangan) return alert("Isi data dengan lengkap!");

            const data = {
                tipe: tipeSekarang,
                jumlah,
                kategori,
                keterangan,
                tanggal: new Date().toLocaleDateString('id-ID', { day: 'numeric', month: 'short', year: 'numeric' })
            };

            transaksi.push(data);
            updateUI();
            
            // Reset form
            document.getElementById('input-jumlah').value = '';
            document.getElementById('input-keterangan').value = '';
        }

        function hapusTransaksi(index) {
            // Konfirmasi hapus agar lebih aman
            if(confirm("Hapus transaksi ini?")) {
                transaksi.splice(index, 1);
                updateUI();
            }
        }
    </script>
</body>
</html>




